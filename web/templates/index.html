<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Dofus Stuffs</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="/static/favicon.ico">
</head>
<body>
    <!-- Barre d’info utilisateur -->
    <div style="margin-bottom:20px;">
        {% if current_user.username %}
            <strong>Connecté en tant que : {{ current_user.username }}</strong>
            {% if current_user.is_admin %}
                (Admin)
            {% else %}
                (Utilisateur standard)
            {% endif %}
            - <a href="/logout">Se déconnecter</a>
        {% else %}
            <strong>Non connecté</strong> - <a href="/login">Se connecter</a>
        {% endif %}
    </div>

    <h1>Items Utilisateur</h1>
    <a href="/add_user_item">Ajouter un item personnalisé</a>
    <ul>
        {% for item_id, item in user_items %}
        <li>
            <strong>{{ item.name }} ({{ item.categorie }}, lvl {{ item.level }})</strong>
            <a href="/edit_user_or_perfect_item/{{ item_id }}/user">Modifier</a>
            {% if current_user.is_admin %}
                <a href="/delete_item/{{ item_id }}/user" onclick="return confirm('Supprimer cet item utilisateur ?')">Supprimer</a>
            {% endif %}
            <table border="1" cellpadding="5">
                <tr><th>Stat</th><th>Valeur</th></tr>
                {% for stat_name, value in item.stats.items() %}
                    {% if value is not none %}
                    <tr>
                        <td>{{ stat_name }}</td>
                        <td>{{ value }}</td>
                    </tr>
                    {% endif %}
                {% endfor %}
            </table>
        </li>
        {% endfor %}
    </ul>

    <h1>Items Parfaits</h1>
    <a href="/add_perfect_item">Ajouter un item parfait</a>
    <ul>
        {% for item_id, item in perfect_items %}
        <li>
            <strong>{{ item.name }} ({{ item.categorie }}, lvl {{ item.level }})</strong>
            {% if current_user.is_admin %}
                <a href="/edit_user_or_perfect_item/{{ item_id }}/perfect">Modifier / Copier</a>
                <a href="/delete_item/{{ item_id }}/perfect" onclick="return confirm('Supprimer cet item parfait ?')">Supprimer</a>
            {% endif %}
            <table border="1" cellpadding="5">
                <tr><th>Stat</th><th>Valeur</th></tr>
                {% for stat_name, value in item.stats.items() %}
                    {% if value is not none %}
                    <tr>
                        <td>{{ stat_name }}</td>
                        <td>{{ value }}</td>
                    </tr>
                    {% endif %}
                {% endfor %}
            </table>
        </li>
        {% endfor %}
    </ul>
</body>
</html>
